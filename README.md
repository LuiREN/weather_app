# Система прогнозирования погоды

Клиент-серверное приложение для сбора данных о погоде, их визуализации и прогнозирования с использованием машинного обучения.

## Технологии

- **Backend**: FastAPI
- **Frontend**: Streamlit
- **База данных**: SQLite3
- **Машинное обучение**: scikit-learn
- **Контейнеризация**: Docker и docker-compose

## Структура проекта

```
weather_app/
├── backend/               # FastAPI приложение
│   ├── app/
│   │   ├── __init__.py
│   │   ├── api.py         # Эндпоинты API
│   │   ├── models.py      # Модели данных
│   │   ├── database.py    # Работа с БД
│   │   ├── scraper.py     # Скрапер погодных данных
│   │   └── ml_model.py    # Модель прогнозирования
│   ├── Dockerfile
│   └── requirements.txt
├── frontend/              # Streamlit приложение
│   ├── app.py
│   ├── Dockerfile
│   └── requirements.txt
├── database/              # Каталог для файла БД
├── test/                  # Каталог тестов
├── docker-compose.yml
└── README.md
```

## Основные функции

1. **Сбор данных о погоде**:
   - Скрапинг данных из открытых источников
   - Сохранение в базу данных SQLite

2. **Визуализация исторических данных**:
   - Графики температуры, влажности, осадков
   - Таблицы с погодными данными
   - Экспорт данных в CSV

3. **Прогнозирование погоды**:
   - Обучение модели на исторических данных
   - Создание прогнозов на заданное количество дней
   - Визуализация прогноза

## Требования

- Docker и Docker Compose
- Visual Studio 2019 (для разработки)
- Python 3.11 (установлен в контейнерах)

## Инструкция по запуску

### Запуск с помощью Docker Compose

1. Клонируйте репозиторий:
   ```
   git clone <url-репозитория>
   cd weather_app
   ```

2. Создайте директорию для базы данных, если она не существует:
   ```
   mkdir -p database
   ```

3. Запустите проект с помощью Docker Compose:
   ```
   docker-compose up -d
   ```

4. Приложение будет доступно по следующим адресам:
   - Frontend (Streamlit): http://localhost:8501
   - Backend API (FastAPI): http://localhost:8000
   - API документация (Swagger): http://localhost:8000/docs

### Работа с приложением

1. В веб-интерфейсе Streamlit введите название города и нажмите "Собрать данные о погоде"
2. После сбора данных выберите город из выпадающего списка для просмотра исторических данных
3. Для создания прогноза нажмите "Обучить модель", затем перейдите на вкладку "Прогноз"

## Разработка

### Бэкенд (FastAPI)

Для запуска бэкенда в режиме разработки:

```bash
cd backend
pip install -r requirements.txt
uvicorn app.api:app --reload
```

### Фронтенд (Streamlit)

Для запуска фронтенда в режиме разработки:

```bash
cd frontend
pip install -r requirements.txt
streamlit run app.py
```

## База данных

SQLite3 база данных сохраняется в файл `database/weather.db`. Структура БД:

- Таблица `weather_data` - хранит информацию о погоде
  - `id` - уникальный идентификатор записи
  - `city` - название города
  - `date` - дата наблюдения
  - `temperature` - температура (°C)
  - `humidity` - влажность (%)
  - `pressure` - атмосферное давление (гПа)
  - `wind_speed` - скорость ветра (м/с)
  - `precipitation` - осадки (мм)
  - `weather_condition` - погодные условия (текстовое описание)
  - `created_at` - дата и время создания записи

## Модель машинного обучения

В проекте используется модель на основе алгоритма Random Forest для прогнозирования:
- Температуры
- Влажности
- Осадков
- Погодных условий

Модель обучается на исторических данных и сохраняется для повторного использования.
